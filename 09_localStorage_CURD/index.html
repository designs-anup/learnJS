<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalStorage :: CURD</title>
</head>
<body>
    <h1>CURD basic using LocalStorage</h1>

    <form id="create_form">
        <input type="text" placeholder="name" class="createName" />
        <input type="text" placeholder="email" class="createEmail">
        <button class="create">Create</button>
    </form>

    <div id="studentInfo"></div>
    <div id="displayInfo">
        <table>
            <thead>
                <tr>
                    <td><strong>Name</strong</td>
                    <td><strong>Email</strong</td>
                    <td><strong>Action</strong</td>
                </tr>
            </thead>
            <tbody class="tableBody"></tbody>
        </table>
    </div>
<script>
// select Elements
const createForm = document.getElementById('create_form')
const studentInfo = document.getElementById('studentInfo')
const displayInfo = document.getElementById('displayInfo')

let localContent = JSON.parse(localStorage.getItem('studentDetails')) || [];

renderTable()

createForm.addEventListener('submit', function(e){
    e.preventDefault()
    const name = this.querySelector('.createName').value
    const email = this.querySelector('.createEmail').value

    localContent.push({name,email})
    // console.log(localContent);
    localStorage.setItem('studentDetails', JSON.stringify(localContent))
    this.reset()
    
    renderTable()
})

function renderTable(){
    studentInfo.innerHTML = "<h2>Out Area in JSON format</h2>" + localStorage.getItem('studentDetails')

    let tbody = document.querySelector('.tableBody')       
    let displayTablelist = ''

    localContent.forEach(function(item, index){
        displayTablelist += `<tr>
                            <td>${item.name}</td>
                            <td>${item.email}</td>
                            <td><button>Edit</button></td>
                            <td><button>Update</button></td>
                        </tr>`
    })

    tbody.innerHTML = displayTablelist
}

</script>
</body>
</html>